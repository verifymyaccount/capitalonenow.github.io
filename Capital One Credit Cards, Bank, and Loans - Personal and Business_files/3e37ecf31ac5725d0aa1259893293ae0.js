Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;!function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;c=function(){return function(a,b){var c=Object.prototype.toString.call(b).slice(8,-1);return void 0!==b&&null!==b&&c===a}}(),d=function(a){return a.bind(null,"Object")}(c),e=function(){var a={agent_info:"/agent_info/jsonschema/1-0-0",application:"/application/jsonschema/1-0-1",coaf:"/coaf/jsonschema/1-0-0",notification:"/notification/jsonschema/1-0-0",
product:"/product/jsonschema/1-0-0",product_test_group:"/product_test_group/jsonschema/1-0-0",model_score:"/model_score/jsonschema/1-0-0",sitecatalyst:"/siteCatalyst/jsonschema/1-0-1",ui_interaction:"/ui_interaction/jsonschema/1-0-0",user_engagement:"/user_engagement/jsonschema/1-0-0",customer:"/customer/jsonschema/1-0-7",intercept:"/intercept/jsonschema/1-0-0",a_b_testing:"/a_b_testing/jsonschema/1-0-1"},b={site_search:"iglu:com.snowplowanalytics.snowplow/site_search/jsonschema/1-0-0"};return{get:function(c){return a.hasOwnProperty(c)?
"iglu:com.capitalone.snowplow"+a[c]:b.hasOwnProperty(c)?b[c]:(console.warn("No such schema in map: "+c),null)}}}(),f=function(a){return function(b,c,d,e){return{schema:a.get("ui_interaction"),data:{action:b,elementType:c,elementName:d,value:e}}}}(e),g=function(){return["banner","button","carousel","checkbox","drawer","dropdown","filter","link","map","message","modal","nav","progress bar","radiobutton","search","sort","textinput","toggle","tooltip"].join("|")}(),h=function(){function a(a,b,c){c[b]=
a&&a.trim()}function b(a){return!!a}var c=arguments;if(c.length){var d,e=new RegExp("^[:|,-]"),f=c[0].match(e),g=f?[].shift.call(c):":";return[].forEach.call(c,a),d=[].filter.call(c,b),[].join.call(d,g)}},i=function(b,c,d){return function(e){var f=RegExp(c),g=[],h="";if(e.chat&&g.push(b("","chat","",e.chat)),e.nav){var i=e.nav.split(":"),j=/^(click|hover)$/.test(i[0])?i[0]:"click",k="";i.length>2?(k=i[1],h=i.slice(2).join(":")):h=i[1],g.push(b(j,"nav",k,h))}if(e.banner&&(e.name?g.push(b("click","banner",
"",e.name)):g.push(b("display","banner","",e.banner.display))),e.name){var l=e.name,m="";if(a.taxonomy){var n=a.taxonomy.level1||"",o=a.taxonomy.level2||"",p=a.taxonomy.level3||"",q=a.taxonomy.level4||"",r=a.taxonomy.level5||"";m=d(n,o,p,q,r)+":"}var s=l.match(f);if(null!==s){var t=l.split(":"),u=s[0];switch(u){case "message":g.push(b("click","message",m+e.name,e.outageMessage));break;case "link":g.push(b("click",u,m+e.name,""));break;case "carousel":g.push(b(t[0],t[1],m+e.name,""));break;case "tooltip":g.push(b("hover",
"tooltiplink",m+e.name,""));break;case "filter":h=e.filter.split(":filter"),t.length>1?g.push(b("select",u,m+e.name,h[0])):g.push(b("select",u,m+e.name,e.filter));break;case "sort":g.push(b("select",u,m+e.name,t[0]));break;case "toggle":var v=l.split(" ");g.push(b("select",u,m+e.name,v[1]));break;case "checkbox":g.push(b("check",u,m+e.name,""));break;case "drawer":case "map":g.push(b(t[1],u,m+e.name,""));break;case "modal":g.push(b("load",u,m+e.name,""));break;case "progress bar":g.push(b("change",
"progressbar",m+e.name,t[1]));break;case "search":g.push(b("submit",u,m+e.name,e.searchTerm));break;case "dropdown":g.push(b("select",u,m+e.name,e.accountAction));break;case "button":e.selection?g.push(b("check","radiobutton",m+e.name,e.selection||"")):e.accountAction?g.push(b("click","dropdown",m+e.name,e.accountAction)):g.push(b("click",u,m+e.name,""))}}}return g}}(f,g,h),j=function(a){return function(b){var c=[];c.push("trackPageView");var d=b.taxonomy.level1,e=b.taxonomy.level2,f=b.taxonomy.level3,
g=b.taxonomy.level4,h=b.taxonomy.level5,i=a(d,e,f,g,h);return c.push(i),c}}(h),k=function(){var a=function(a,b){return a.test(b)};return{init:function(b,c){return function(d){var e=Object.keys(d),f=[];return c.getContexts().forEach(function(g){var h=c.getContextPropertiesRegex(g);if(e.some(a.bind(null,h))){var i=c.getContextData(d,g);if(i){var j={schema:b.get(g),data:i};f.push(j)}}}),f}}}}(),l=function(a){return a.bind(null,"Array")}(c),m=function(a){return a.bind(null,"String")}(c),n=function(a){return a.bind(null,
"Function")}(c),o=function(a,b,c,d){var e=function(){if(c(this))return this.toString()},f=function(){return this.start&&"start"||this.complete&&"complete"},g=function(){return this.start||this.complete},h=function(){var a=arguments;return function(){var b=[];if([].forEach.call(a,function(a){this[a]&&b.push(this[a])},this),b.length)return b}},i={a_b_testing:{fields:["akamaiTest","testGroup"],defaults:{name:"N/A"}},application:{fields:["applicationId","offerType","audienceType","passTrack"],application:{applicationStatusDetail:function(){return this.decision},
productType:g,progress:f},solicitationId:"solicitationReferenceNumber"},coaf:["dealerId","vin"],customer:{altCustId:"alternateCustomerId",clientCorrelationId:"sessionId",prid:"profileReferenceId"},intercept:{intercept:{action:function(){return this.banner&&"display"||this.click&&"click"||this.accept&&"accept"},campaigns:h("banner","click","accept")},banner:{campaigns:h("display","click")},interactionMessage:{campaigns:h("display","click")}},notification:["apiErrorCode","error","outageMessage"],product:["productName"],
sitecatalyst:{fields:["brand","clientId","customerType","keywords","lob","pffSrcId","userType"],campaignID:"ease_campaign"},product_test_group:{portalTestGroup:{value:function(){return this.split("|")[4]}},testCell:"value"},model_score:{portalTestGroup:{modelScore:function(){return this.split("|")[1]}}},site_search:{defaults:{terms:["N/A"]},searchResults:{pageResults:function(){return isNaN(this)?this:parseInt(this)}},searchTerm:{terms:function(){return[e.call(this)]}}},user_engagement:{login:{type:"login",
typeDetail:e},selfService:{type:function(){return this.type||"self service"},typeDetail:g,status:f},enrollment:{type:"enrollment",typeDetail:g,status:f},accountType:"typeDetail"}},j=function(a,b,c){return a.forEach(function(a){b[a]&&(c[a]=b[a])}),c},k=function(a){return"fields"!==a};return{getContextData:function(e,f){var g={},h=i[f];return a(h)&&(a(h.defaults)&&Object.keys(h.defaults).forEach(function(a){g[a]=h.defaults[a]}),b(h.fields)&&(g=j(h.fields,e,g)),Object.keys(h).filter(k).forEach(function(b){void 0!==
e[b]&&(a(h[b])?Object.keys(h[b]).forEach(function(a){var c=d(this[a])?this[a].call(e[b]):this[a];!c&&isNaN(c)||(g[a]=c)},h[b]):c(h[b])&&(g[h[b]]=e[b]))})),b(h)&&(g=j(h,e,g)),0===Object.keys(g).length?null:g},getContextPropertiesRegex:function(c){var d;return b(i[c])&&(d=i[c]),a(i[c])&&(d=i[c].fields||[],d=d.concat(Object.keys(i[c]).filter(k))),new RegExp(d.join("|"))},getContexts:function(){return Object.keys(i)}}}(d,l,m,n),p=function(){function b(a){var b="",c="";return a.forEach(function(a){b=0===
b.length?a.campaign:b+"|"+a.campaign,c=0===c.length?a.campaignId+":"+a.experienceId:c+"|"+a.campaignId+":"+a.experienceId}),{name:b,adobe_tnt:c}}return function(){return new Promise(function(c,d){var e={schema:"iglu:com.capitalone.snowplow/a_b_testing/jsonschema/1-0-2",data:{}},f=setTimeout(d,2E3);a.siteTestData?(clearTimeout(f),e.data=b(a.siteTestData),c(e)):document.addEventListener("siteTestDataReady",function(){clearTimeout(f),e.data=b(a.siteTestData),c(e)})})}}(),q=function(a,b){var c,d={},e=
[];return[a,b].forEach(function(a){for(c in a)"events"===c?e.push(a[c]):d[c]=a[c]}),e.length&&(d.events=e.sort().join()),d},r=function(b,c,d,e,f,g,h,i,j){return f=f.init(e,g),function(e,g){var k="potomac-stage.capitalone.com",l=!0;return g.isProd&&(k="potomac-clickstream.capitalone.com"),function(g,m){if(null!==g){var n=[],o=[],p=b(g.taxonomy),q=b(g.spEvent);if(m&&m.length&&m.forEach(function(a){g=j(g,a.data)}),n=n.concat(c(g)),n=n.concat(f(g)),p)e("newTracker","capone",k,{appId:g.taxonomy.system,
platform:"web",forceSecureTracker:l,forceUnsecureTracker:!l,discoverRootDomain:!0,post:!0}),e("enableLinkClickTracking"),g.taxonomy&&(a.taxonomy=g.taxonomy),o=d(g);else if(o.push("trackUnstructEvent"),q)o.push(g.spEvent);else{var r=n.findIndex(function(a){return a.schema.includes("ui_interaction")});if(r>-1){var s=n.splice(r,1);o.push(s[0])}else o.push(h("default","message",g.name||"N/A",""))}g.spContexts&&(n=n.concat(g.spContexts));var t=function(){return!1};return o.length>1?i().then(function(a){n.push(a)},
t).then(function(){return n.length&&o.push(n),e.apply(a,o),!0},t):Promise.rejected(!1)}}}}(d,i,j,e,k,o,f,p,q);var s=r(a.sp,b);a.publisherFW.addListenerMap("snowplow",{trackAnalytics:{isEnabled:!0,track:s}});var t=a.localStorage.kmInfo&&JSON.parse(a.localStorage.kmInfo),u={altCustId:t&&t.umk,prid:b.Cookies.get("C1_PRID")};a.publisherFW.addAuxData("trackAnalytics","snowplow",{data:u})}(window,Bootstrapper)},3046715,[2234110],498764,[498763]);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var hasScrolled=false;var trackScroll=function(){var currentScroll=Math.round(window.scrollY);var limit=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight;var scrollDepth=Math.round(100*currentScroll/limit);window.sp("trackSelfDescribingEvent",
{schema:"iglu:com.capitalone.snowplow/ui_interaction/jsonschema/1-0-0",data:{action:"scroll",elementType:"window",elementName:"N/A",value:scrollDepth.toString()}});hasScrolled=false};window.addEventListener("scroll",function(){if(!hasScrolled){hasScrolled=true;window.setTimeout(trackScroll,1E3)}})},2942461,[2234110],536915,[498763]);